<taconite>
{% set dialog_id = 'ie__dialog__' ~ uids_as_string %}

{% set form_id = dialog_id ~ '_form' %}

{% include bundle_name ~ ':' ~ controller_name ~ ':Includes/reload_container.html.twig' %}

{% if action_if_success == 'close' %}

                    <eval><![CDATA[
                ${{ dialog_id }}.dialog('close');
                    ]]>
                    </eval>

{% else %}

                {% include bundle_name ~ ':' ~ controller_name ~ ':Includes/open_ui_dialog.html.twig' %}

                {% include form_template %}

                    <eval><![CDATA[

    $( "#{{ dialog_id }}" ).dialog('option',
    {
        buttons: {
            '{{ 'Delete' | trans({}, (bundle_name | lower)) }}': function () {
                if (confirm('{{ 'Are you sure?' | trans({}, (bundle_name | lower)) }}'))
                {
                    mmf_ie_ajax("{{ path('mmf_ie_delete', {'url_safe_encoded_params': url_safe_encoded_params }) }}", undefined, "#{{ dialog_id }}")
                }
            },
            '{{ 'Delete & close' | trans({}, (bundle_name | lower)) }}': function () {
                if (confirm('{{ 'Are you sure?' | trans({}, (bundle_name | lower)) }}'))
                {
                    mmf_ie_ajax("{{ path('mmf_ie_delete', {'url_safe_encoded_params': url_safe_encoded_params, 'action_if_success': 'close'  }) }}", undefined, "#{{ dialog_id }}")
                }
             },
            '{{ 'Save' | trans({}, (bundle_name | lower)) }}': function () {
                $("#{{ form_id }}").ajaxForm({
                  dataType: "xml"
                  , url: "{{ path('mmf_ie_edit', {'url_safe_encoded_params': url_safe_encoded_params  }) }}"
                  //,success: $.taconite
                });
                mmf_ie_submit("#{{ form_id }}", "#{{ dialog_id }}" );
            },
            '{{ 'Save & close' | trans({}, (bundle_name | lower)) }}': function () {
                $("#{{ form_id }}").ajaxForm({
                  dataType: "xml"
                  , url: "{{ path('mmf_ie_edit', {'url_safe_encoded_params': url_safe_encoded_params, 'action_if_success': 'close' }) }}"
                  //,success: $.taconite
                });
                mmf_ie_submit("#{{ form_id }}", "#{{ dialog_id }}" );
             }
        }//buttons
    }).dialog('open');
                ]]>
                </eval>

{% endif %}
</taconite>
